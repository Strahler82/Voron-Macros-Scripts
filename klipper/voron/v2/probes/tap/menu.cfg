[menu __main __probe ___probe]
index: 4
type: list
enable: { 'Printing' not in printer.idle_timeout.state }
name: TAP...

[menu __main __probe ___probe __z_apply]
type: command
name: { "apply z offset: %0.2f" % (printer.gcode_move.homing_origin.z) if printer.gcode_move.homing_origin.z else "no offset" }
gcode:
  {% if printer.gcode_move.homing_origin.z %}
    Z_OFFSET_APPLY_PROBE
    M117 offset { "%0.2f" % (printer.gcode_move.homing_origin.z) } applied
  {% endif %}

[menu __main __probe ___probe __calibrate]
type: list
enable: { 'Printing' not in printer.idle_timeout.state }
name: Calibrate TAP

[menu __main __probe ___probe __calibrate __start]
type: command
name: Start Calibration
gcode:
  PROBE_CALIBRATE

[menu __main __probe ___probe __calibrate __test_down]
type: list
name: Test Z Down...

[menu __main __probe ___probe __calibrate __test_down z_down_001]
type: command
name: lower z -0.01
gcode:
  TESTZ Z=-0.01

[menu __main __probe ___probe __calibrate __test_down z_down_01]
type: command
name: lower z -0.1
gcode:
  TESTZ Z=-0.1

[menu __main __probe ___probe __calibrate __test_down z_down_1]
type: command
name: lower z -1.0
gcode:
  TESTZ Z=-1.0

[menu __main __probe ___probe __calibrate __test_up]
type: list
name: Test Z Up...

[menu __main __probe ___probe __calibrate __test_up z_up_001]
type: command
name: raise z +0.01
gcode:
  TESTZ Z=+0.01

[menu __main __probe ___probe __calibrate __test_up z_up_01]
type: command
name: raise z +0.1
gcode:
  TESTZ Z=+0.1

[menu __main __probe ___probe __calibrate __test_up z_up_1]
type: command
name: raise z +1.0
gcode:
  TESTZ Z=+1.0

[menu __main __probe ___probe __calibrate __accept]
type: command
name: Accept
gcode:
  ACCEPT
  CENTER

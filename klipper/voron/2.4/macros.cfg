[gcode_macro HOME ]
gcode:
    G28
    G0 X175 Y175 Z30 F20000

[gcode_macro RAISE ]
gcode:
    G28
    G0 X175 Y175 Z200 F20000



[gcode_macro TEST_PROBE]
gcode:
    QGL
    PROBE_ACCURACY

[gcode_macro DISABLE_STEPPERS]
gcode:
    M18

[gcode_macro QGL]
gcode:
    G28
    QUAD_GANTRY_LEVEL
    G28
    G0 X175 Y175 Z30 F20000

[gcode_macro G32]
gcode:
    QGL

[gcode_macro FULL_BED_MESH]
gcode:
    M140 S110
    M104 S250
    M190 S110
    M109 S250
    G28
    QUAD_GANTRY_LEVEL
    G28
    BED_MESH_CLEAR
    BED_MESH_CALIBRATE probe_count=7,7 relative_reference_index=24
    G28

[gcode_macro FAST_BED_MESH]
gcode:
    G28
    QUAD_GANTRY_LEVEL
    G28
    BED_MESH_CLEAR
    BED_MESH_CALIBRATE probe_count=3,3 relative_reference_index=4
    G28

[gcode_macro BED_MESH]
gcode:
    G28
    QUAD_GANTRY_LEVEL
    G28
    BED_MESH_CLEAR
    BED_MESH_CALIBRATE
    G28

[gcode_macro Z_OFFSET]
gcode:
    G28
    QUAD_GANTRY_LEVEL
    G28
    G1 X175 Y175 F20000
    BED_MESH_CLEAR
    Z_ENDSTOP_CALIBRATE

[gcode_macro PURGE_LINE]
gcode:
    G28
    G1 Z2.0 F3000 ; Move Z Axis up little to prevent scratching of Heat Bed
    G1 X2 Y20 Z0.3 F5000.0 ; Move to start position
    G1 X2 Y300.0 Z0.3 F1500.0 E15 ; Draw the first line
    G1 X2.4 Y300.0 Z0.3 F5000.0 ; Move to side a little
    G1 X2.4 Y20 Z0.3 F1500.0 E30 ; Draw the second line
    G1 Z2.0 F3000 ; Move Z Axis up little to prevent scratching of Heat Bed
    G1 X3 Y20 Z0.3 F5000.0 ; Move over to prevent blob squish


[gcode_macro PRINT_START]
gcode:
    FAST_BED_MESH
    PURGE_LINE

[gcode_macro PRINT_END]
gcode:
    M400                           ; wait for buffer to clear
    G92 E0                         ; zero the extruder
    G1 E-10.0 F3600                ; retract filament
    G91                            ; relative positioning
    G0 Z1.00 X20.0 Y20.0 F20000    ; move nozzle to remove stringing
    TURN_OFF_HEATERS
    M107                           ; turn off fan
    G1 Z2 F3000                    ; move nozzle up 2mm
    G90                            ; absolute positioning
    G0  X125 Y250 F3600            ; park nozzle at rear


[gcode_macro PREHEAT_ABS]
gcode:
    M140 S110
    M104 S250

[gcode_macro PREHEAT_PETG]
gcode:
    M140 S80
    M104 S245

[gcode_macro PREHEAT_PLA]
gcode:
    M140 S60
    M104 S200

[gcode_macro PREHEAT_TPU]
gcode:
    M140 S40
    M104 S245

